{"ast":null,"code":"import _asyncToGenerator from \"/Users/laurenzhinterholzer/Documents/WIN/WIN 2022S/BAC WIN/platform/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/overview/shared/file-upload/file-upload.service\";\nimport * as i2 from \"@angular/forms\";\n/**\n * Component for handling file uploads.\n */\n\nexport class FileUploadComponent {\n  /**\n   * Constructor.\n   *\n   * @param fileUploadService the injected file upload service\n   * @param fb the injected form builder\n   */\n  constructor(fileUploadService, fb) {\n    this.fileUploadService = fileUploadService;\n    this.fb = fb;\n    this.fileRemoved = new EventEmitter();\n    this.fileAdded = new EventEmitter();\n    this.fileModified = new EventEmitter();\n    this.fileUploadGroup = this.fb.group({\n      fileUpload: [null, []]\n    });\n    this.isSaving = false;\n    this.disabled = false;\n    this._fileId = -1;\n    this._originalId = -1;\n    this._fileRemoved = false;\n    this._fileSelected = false;\n  }\n  /**\n   * Sets the file id.\n   *\n   * @param value the value to set\n   */\n\n\n  set fileId(value) {\n    var _this = this;\n\n    this._fileId = value;\n\n    if (value > -1) {\n      this._originalId = value;\n\n      _asyncToGenerator(function* () {\n        _this.fileMetaData = yield _this.fileUploadService.getFileMetaData(value).toPromise();\n      })();\n    } else {\n      this.fileMetaData = undefined;\n    }\n  }\n  /**\n   * Returns the file id.\n   */\n\n\n  get fileId() {\n    return this._fileId;\n  }\n  /**\n   * Returns whether the file is set or not.\n   */\n\n\n  isFileSet() {\n    return this._fileId > -1;\n  }\n  /**\n   * Event handler for a file change.\n   */\n\n\n  fileChanged() {\n    this._fileSelected = true;\n  }\n  /**\n   * Downloads the current file.\n   */\n\n\n  downloadCurrentFile() {\n    this.fileUploadService.retrieveAndDownloadFile(this.fileId);\n  }\n  /**\n   * Marks the current file as removed.\n   */\n\n\n  removeCurrentFile() {\n    this.fileId = -1;\n    this._fileRemoved = true;\n  }\n  /**\n   * Asynchronously saves the current file selection.\n   */\n\n\n  saveAsync() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let newId = -1;\n      _this2.isSaving = true;\n\n      if (_this2._fileRemoved) {\n        yield _this2.fileUploadService.deleteFile(_this2._originalId).toPromise();\n      }\n\n      if (_this2._fileSelected) {\n        const fileList = _this2.fileUploadGroup.get(['fileUpload']).value;\n\n        const file = fileList.item(0);\n        newId = yield _this2.fileUploadService.uploadFile(file).toPromise();\n      }\n\n      if (_this2._fileRemoved && newId === -1) {\n        _this2.fileRemoved.emit(_this2._originalId);\n      } else if (!_this2._fileRemoved && _this2._originalId < 0 && newId >= 0) {\n        _this2.fileAdded.emit(newId);\n      } else if ((_this2._fileRemoved || _this2._originalId >= 0 && _this2._originalId !== newId) && newId >= 0) {\n        yield _this2.fileUploadService.deleteFile(_this2._originalId).toPromise();\n\n        _this2.fileModified.emit([_this2._originalId, newId]);\n      }\n\n      _this2.fileId = newId;\n      _this2.isSaving = false;\n    })();\n  }\n\n}\n\nFileUploadComponent.ɵfac = function FileUploadComponent_Factory(t) {\n  return new (t || FileUploadComponent)(i0.ɵɵdirectiveInject(i1.FileUploadService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\n\nFileUploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FileUploadComponent,\n  selectors: [[\"jhi-file-upload\"]],\n  inputs: {\n    disabled: \"disabled\",\n    fileId: \"fileId\"\n  },\n  outputs: {\n    fileRemoved: \"fileRemoved\",\n    fileAdded: \"fileAdded\",\n    fileModified: \"fileModified\"\n  },\n  decls: 61,\n  vars: 0,\n  consts: [[3, \"ngSubmit\"]],\n  template: function FileUploadComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0, \"\\n\");\n      i0.ɵɵtext(1, \"\\n\\n\");\n      i0.ɵɵtext(2, \"\\n\");\n      i0.ɵɵtext(3, \"\\n\");\n      i0.ɵɵtext(4, \"\\n\");\n      i0.ɵɵtext(5, \"\\n\");\n      i0.ɵɵtext(6, \"\\n\");\n      i0.ɵɵtext(7, \"\\n\");\n      i0.ɵɵtext(8, \"\\n\");\n      i0.ɵɵtext(9, \"\\n\");\n      i0.ɵɵtext(10, \"\\n\");\n      i0.ɵɵtext(11, \"\\n\");\n      i0.ɵɵtext(12, \"\\n\");\n      i0.ɵɵtext(13, \"\\n\");\n      i0.ɵɵtext(14, \"\\n\");\n      i0.ɵɵtext(15, \"\\n\");\n      i0.ɵɵtext(16, \"\\n\");\n      i0.ɵɵtext(17, \"\\n\");\n      i0.ɵɵtext(18, \"\\n\");\n      i0.ɵɵtext(19, \"\\n\\n\");\n      i0.ɵɵtext(20, \"\\n\\n\");\n      i0.ɵɵtext(21, \"\\n\");\n      i0.ɵɵtext(22, \"\\n\");\n      i0.ɵɵtext(23, \"\\n\");\n      i0.ɵɵtext(24, \"\\n\");\n      i0.ɵɵtext(25, \"\\n\");\n      i0.ɵɵtext(26, \"\\n\");\n      i0.ɵɵelementStart(27, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function FileUploadComponent_Template_form_ngSubmit_27_listener() {\n        return ctx.saveAsync();\n      });\n      i0.ɵɵtext(28, \"\\n\");\n      i0.ɵɵtext(29, \"\\n\");\n      i0.ɵɵtext(30, \"\\n\");\n      i0.ɵɵtext(31, \"\\n\\n\");\n      i0.ɵɵtext(32, \"\\n\");\n      i0.ɵɵtext(33, \"\\n\");\n      i0.ɵɵtext(34, \"\\n\");\n      i0.ɵɵtext(35, \"\\n\");\n      i0.ɵɵtext(36, \"\\n\");\n      i0.ɵɵtext(37, \"\\n\");\n      i0.ɵɵtext(38, \"\\n\");\n      i0.ɵɵtext(39, \"\\n\");\n      i0.ɵɵtext(40, \"\\n\");\n      i0.ɵɵtext(41, \"\\n\\n\");\n      i0.ɵɵtext(42, \"\\n\");\n      i0.ɵɵtext(43, \"\\n\");\n      i0.ɵɵtext(44, \"\\n\");\n      i0.ɵɵtext(45, \"\\n\");\n      i0.ɵɵtext(46, \"\\n\");\n      i0.ɵɵtext(47, \"\\n\");\n      i0.ɵɵtext(48, \"\\n\");\n      i0.ɵɵtext(49, \"\\n\");\n      i0.ɵɵtext(50, \"\\n\");\n      i0.ɵɵtext(51, \"\\n\");\n      i0.ɵɵtext(52, \"\\n\");\n      i0.ɵɵtext(53, \"\\n\\n\");\n      i0.ɵɵtext(54, \"\\n\\n\");\n      i0.ɵɵtext(55, \"\\n\");\n      i0.ɵɵtext(56, \"\\n\");\n      i0.ɵɵtext(57, \"\\n\");\n      i0.ɵɵtext(58, \"\\n\");\n      i0.ɵɵtext(59, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n\");\n    }\n  },\n  directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm],\n  styles: [\".bold-font[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\n.pointer[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n\\n.hover-underline[_ngcontent-%COMP%]:hover {\\n  -webkit-text-decoration-line: underline;\\n          text-decoration-line: underline;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtdXBsb2FkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7QUFDRjs7QUFFQTtFQUNFLHVDQUFBO1VBQUEsK0JBQUE7QUFDRiIsImZpbGUiOiJmaWxlLXVwbG9hZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ib2xkLWZvbnQge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnBvaW50ZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5ob3Zlci11bmRlcmxpbmU6aG92ZXIge1xuICB0ZXh0LWRlY29yYXRpb24tbGluZTogdW5kZXJsaW5lO1xufVxuIl19 */\"]\n});","map":{"version":3,"sources":["/Users/laurenzhinterholzer/Documents/WIN/WIN 2022S/BAC WIN/platform/src/main/webapp/app/overview/shared/file-upload/file-upload.component.ts"],"names":["EventEmitter","i0","i1","i2","FileUploadComponent","constructor","fileUploadService","fb","fileRemoved","fileAdded","fileModified","fileUploadGroup","group","fileUpload","isSaving","disabled","_fileId","_originalId","_fileRemoved","_fileSelected","fileId","value","fileMetaData","getFileMetaData","toPromise","undefined","isFileSet","fileChanged","downloadCurrentFile","retrieveAndDownloadFile","removeCurrentFile","saveAsync","newId","deleteFile","fileList","get","file","item","uploadFile","emit","ɵfac","FileUploadComponent_Factory","t","ɵɵdirectiveInject","FileUploadService","FormBuilder","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","outputs","decls","vars","consts","template","FileUploadComponent_Template","rf","ctx","ɵɵtext","ɵɵelementStart","ɵɵlistener","FileUploadComponent_Template_form_ngSubmit_27_listener","ɵɵelementEnd","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","styles"],"mappings":"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","sourcesContent":["import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/overview/shared/file-upload/file-upload.service\";\nimport * as i2 from \"@angular/forms\";\n/**\n * Component for handling file uploads.\n */\nexport class FileUploadComponent {\n    /**\n     * Constructor.\n     *\n     * @param fileUploadService the injected file upload service\n     * @param fb the injected form builder\n     */\n    constructor(fileUploadService, fb) {\n        this.fileUploadService = fileUploadService;\n        this.fb = fb;\n        this.fileRemoved = new EventEmitter();\n        this.fileAdded = new EventEmitter();\n        this.fileModified = new EventEmitter();\n        this.fileUploadGroup = this.fb.group({\n            fileUpload: [null, []],\n        });\n        this.isSaving = false;\n        this.disabled = false;\n        this._fileId = -1;\n        this._originalId = -1;\n        this._fileRemoved = false;\n        this._fileSelected = false;\n    }\n    /**\n     * Sets the file id.\n     *\n     * @param value the value to set\n     */\n    set fileId(value) {\n        this._fileId = value;\n        if (value > -1) {\n            this._originalId = value;\n            (async () => {\n                this.fileMetaData = await this.fileUploadService.getFileMetaData(value).toPromise();\n            })();\n        }\n        else {\n            this.fileMetaData = undefined;\n        }\n    }\n    /**\n     * Returns the file id.\n     */\n    get fileId() {\n        return this._fileId;\n    }\n    /**\n     * Returns whether the file is set or not.\n     */\n    isFileSet() {\n        return this._fileId > -1;\n    }\n    /**\n     * Event handler for a file change.\n     */\n    fileChanged() {\n        this._fileSelected = true;\n    }\n    /**\n     * Downloads the current file.\n     */\n    downloadCurrentFile() {\n        this.fileUploadService.retrieveAndDownloadFile(this.fileId);\n    }\n    /**\n     * Marks the current file as removed.\n     */\n    removeCurrentFile() {\n        this.fileId = -1;\n        this._fileRemoved = true;\n    }\n    /**\n     * Asynchronously saves the current file selection.\n     */\n    async saveAsync() {\n        let newId = -1;\n        this.isSaving = true;\n        if (this._fileRemoved) {\n            await this.fileUploadService.deleteFile(this._originalId).toPromise();\n        }\n        if (this._fileSelected) {\n            const fileList = this.fileUploadGroup.get(['fileUpload']).value;\n            const file = fileList.item(0);\n            newId = await this.fileUploadService.uploadFile(file).toPromise();\n        }\n        if (this._fileRemoved && newId === -1) {\n            this.fileRemoved.emit(this._originalId);\n        }\n        else if (!this._fileRemoved && this._originalId < 0 && newId >= 0) {\n            this.fileAdded.emit(newId);\n        }\n        else if ((this._fileRemoved || (this._originalId >= 0 && this._originalId !== newId)) && newId >= 0) {\n            await this.fileUploadService.deleteFile(this._originalId).toPromise();\n            this.fileModified.emit([this._originalId, newId]);\n        }\n        this.fileId = newId;\n        this.isSaving = false;\n    }\n}\nFileUploadComponent.ɵfac = function FileUploadComponent_Factory(t) { return new (t || FileUploadComponent)(i0.ɵɵdirectiveInject(i1.FileUploadService), i0.ɵɵdirectiveInject(i2.FormBuilder)); };\nFileUploadComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: FileUploadComponent, selectors: [[\"jhi-file-upload\"]], inputs: { disabled: \"disabled\", fileId: \"fileId\" }, outputs: { fileRemoved: \"fileRemoved\", fileAdded: \"fileAdded\", fileModified: \"fileModified\" }, decls: 61, vars: 0, consts: [[3, \"ngSubmit\"]], template: function FileUploadComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtext(0, \"\\n\");\n        i0.ɵɵtext(1, \"\\n\\n\");\n        i0.ɵɵtext(2, \"\\n\");\n        i0.ɵɵtext(3, \"\\n\");\n        i0.ɵɵtext(4, \"\\n\");\n        i0.ɵɵtext(5, \"\\n\");\n        i0.ɵɵtext(6, \"\\n\");\n        i0.ɵɵtext(7, \"\\n\");\n        i0.ɵɵtext(8, \"\\n\");\n        i0.ɵɵtext(9, \"\\n\");\n        i0.ɵɵtext(10, \"\\n\");\n        i0.ɵɵtext(11, \"\\n\");\n        i0.ɵɵtext(12, \"\\n\");\n        i0.ɵɵtext(13, \"\\n\");\n        i0.ɵɵtext(14, \"\\n\");\n        i0.ɵɵtext(15, \"\\n\");\n        i0.ɵɵtext(16, \"\\n\");\n        i0.ɵɵtext(17, \"\\n\");\n        i0.ɵɵtext(18, \"\\n\");\n        i0.ɵɵtext(19, \"\\n\\n\");\n        i0.ɵɵtext(20, \"\\n\\n\");\n        i0.ɵɵtext(21, \"\\n\");\n        i0.ɵɵtext(22, \"\\n\");\n        i0.ɵɵtext(23, \"\\n\");\n        i0.ɵɵtext(24, \"\\n\");\n        i0.ɵɵtext(25, \"\\n\");\n        i0.ɵɵtext(26, \"\\n\");\n        i0.ɵɵelementStart(27, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function FileUploadComponent_Template_form_ngSubmit_27_listener() { return ctx.saveAsync(); });\n        i0.ɵɵtext(28, \"\\n\");\n        i0.ɵɵtext(29, \"\\n\");\n        i0.ɵɵtext(30, \"\\n\");\n        i0.ɵɵtext(31, \"\\n\\n\");\n        i0.ɵɵtext(32, \"\\n\");\n        i0.ɵɵtext(33, \"\\n\");\n        i0.ɵɵtext(34, \"\\n\");\n        i0.ɵɵtext(35, \"\\n\");\n        i0.ɵɵtext(36, \"\\n\");\n        i0.ɵɵtext(37, \"\\n\");\n        i0.ɵɵtext(38, \"\\n\");\n        i0.ɵɵtext(39, \"\\n\");\n        i0.ɵɵtext(40, \"\\n\");\n        i0.ɵɵtext(41, \"\\n\\n\");\n        i0.ɵɵtext(42, \"\\n\");\n        i0.ɵɵtext(43, \"\\n\");\n        i0.ɵɵtext(44, \"\\n\");\n        i0.ɵɵtext(45, \"\\n\");\n        i0.ɵɵtext(46, \"\\n\");\n        i0.ɵɵtext(47, \"\\n\");\n        i0.ɵɵtext(48, \"\\n\");\n        i0.ɵɵtext(49, \"\\n\");\n        i0.ɵɵtext(50, \"\\n\");\n        i0.ɵɵtext(51, \"\\n\");\n        i0.ɵɵtext(52, \"\\n\");\n        i0.ɵɵtext(53, \"\\n\\n\");\n        i0.ɵɵtext(54, \"\\n\\n\");\n        i0.ɵɵtext(55, \"\\n\");\n        i0.ɵɵtext(56, \"\\n\");\n        i0.ɵɵtext(57, \"\\n\");\n        i0.ɵɵtext(58, \"\\n\");\n        i0.ɵɵtext(59, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(60, \"\\n\");\n    } }, directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm], styles: [\".bold-font[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\n.pointer[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n\\n.hover-underline[_ngcontent-%COMP%]:hover {\\n  -webkit-text-decoration-line: underline;\\n          text-decoration-line: underline;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtdXBsb2FkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7QUFDRjs7QUFFQTtFQUNFLHVDQUFBO1VBQUEsK0JBQUE7QUFDRiIsImZpbGUiOiJmaWxlLXVwbG9hZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ib2xkLWZvbnQge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnBvaW50ZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5ob3Zlci11bmRlcmxpbmU6aG92ZXIge1xuICB0ZXh0LWRlY29yYXRpb24tbGluZTogdW5kZXJsaW5lO1xufVxuIl19 */\"] });\n"]},"metadata":{},"sourceType":"module"}